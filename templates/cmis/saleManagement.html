<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>销售管理</title>
    <!-- Bootstrap Styles-->
    <link href="../static/assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="../static/assets/css/font-awesome.css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="../static/assets/js/morris/morris-0.4.3.min.css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="../static/assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
</head>

<body>
    <div id="wrapper">
        <!--上面-->
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/index"><strong>北大食堂管理系统</strong></a>
            </div>
            <ul class="nav navbar-top-links navbar-left">
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                       	销售记录<i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-alerts">
                        <li>
                            <a href="#">
                                <div>
                                   今日销售
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    全部记录
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                                <div>
                                    销售统计
                                </div>
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li class="divider"></li>
                    </ul>
                    <!-- /.dropdown-alerts -->
                </li>
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i> User Profile</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
        </nav>
        <!--/. NAV TOP 左侧 -->
        <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">

                    <li>
                        <a href="/index"><i class="fa fa-dashboard"></i> 主页</a>
                    </li>
                    <li>
                        <a href="/menuManagement"><i class="fa fa-desktop"></i> 菜谱管理</a>
                    </li>
					<li>
                        <a class="active-menu" href="/saleManagement"><i class="fa fa-bar-chart-o"></i> 销售管理</a>
                    </li>
                    <li>
                        <a href="/repertoryManagement"><i class="fa fa-qrcode"></i> 库存管理</a>
                    </li>
                    
                    <li>
                        <a href="/appointManagement"><i class="fa fa-table"></i> 预约管理</a>
                    </li>
                    <li>
                        <a href="/purchaseManagement"><i class="fa fa-edit"></i> 采购管理</a>
                    </li>
                </ul>

            </div>

        </nav>
        <!-- /. 右侧 -->
        <div id="page-wrapper">
            <div id="page-inner" style="margin-top:40px;">
                <div class="col-md-12" style="font-weight:bold;">
                    <div class="col-lg-6" style="margin-top:10px;width:70%;">
                        <div class="col-lg-6">
                            <label>开始时间:</label>
                            <select class="checkbox-inline" style="width:90px;" id="start-year">
                                <option value="2015">2015</option>
                                <option value="2016">2016</option>
                                <option value="2017">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                            </select>
                            <lable>年</lable>
                            <select class="checkbox-inline" style="width:60px;" id="start-month">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                            <lable>月</lable>
                            <select class="checkbox-inline" style="width:60px;" id="start-day">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                                <option value="31">31</option>
                            </select>
                            <lable>日</lable>
                        </div>
                        <div class="col-lg-6">
                            <lable>结束时间:</lable>
                            <select class="checkbox-inline" style="width:90px;" id="end-year">
                                <option value="2015">2015</option>
                                <option value="2016">2016</option>
                                <option value="2017">2017</option>
                                <option value="2018">2018</option>
                                <option value="2019">2019</option>
                            </select>
                            <lable>年</lable>
                            <select class="checkbox-inline" style="width:60px;" id="end-month">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                            <lable>月</lable>
                            <select class="checkbox-inline" style="width:60px;" id="end-day">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                                <option value="13">13</option>
                                <option value="14">14</option>
                                <option value="15">15</option>
                                <option value="16">16</option>
                                <option value="17">17</option>
                                <option value="18">18</option>
                                <option value="19">19</option>
                                <option value="20">20</option>
                                <option value="21">21</option>
                                <option value="22">22</option>
                                <option value="23">23</option>
                                <option value="24">24</option>
                                <option value="25">25</option>
                                <option value="26">26</option>
                                <option value="27">27</option>
                                <option value="28">28</option>
                                <option value="29">29</option>
                                <option value="30">30</option>
                                <option value="31">31</option>
                            </select>
                            <lable>日</lable>
                        </div>
                    </div>   
                    <div class="col-lg-6" style="margin-right:0px;width:30%">
                        <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" id="sale-button">
                            销售记录查询
                        </button>
                    </div>
                </div>
                    
                    <div class="row" style="margin-top: 80px;">
                        <div class="col-md-12">
                            <!-- Advanced Tables -->
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    销售记录
                                </div>
                                <div class="panel-body">
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered table-hover" id="saleResult">
                                            <thead>
                                                <tr>
                                                    <th>序号</th>
                                                    <th>日期</th>
                                                    <th>订单号</th>
                                                    <th>菜品名称</th>
                                                    <th>份数</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!-- <tr class="odd gradeA">
                                                    <td>1</td>
                                                    <td>猪肉</td>
                                                    <td>100</td>
                                                </tr>
                                                <tr class="even gradeA">
                                                    <td>2</td>
                                                    <td>青菜</td>
                                                    <td>200</td>
                                                </tr> -->
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                </div>
                            </div>
                            <!--End Advanced Tables -->
                        </div>
                    </div>
                
                            
                            <!-- /. ROW  -->
                            
                        </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <!-- JS Scripts-->
    <!-- jQuery Js -->
    <script src="../static/assets/js/jquery-1.10.2.js"></script>
    <!-- Bootstrap Js -->
    <script src="../static/assets/js/bootstrap.min.js"></script>
	 
    <!-- Metis Menu Js -->
    <script src="../static/assets/js/jquery.metisMenu.js"></script>
    <!-- Morris Chart Js -->
    <script src="../static/assets/js/morris/raphael-2.1.0.min.js"></script>
    <script src="../static/assets/js/morris/morris.js"></script>
	
	
	<script src="../static/assets/js/easypiechart.js"></script>
	<script src="../static/assets/js/easypiechart-data.js"></script>
	<!-- DATA TABLE SCRIPTS -->
    <script src="../static/assets/js/dataTables/jquery.dataTables.js"></script>
    <script src="../static/assets/js/dataTables/dataTables.bootstrap.js"></script>
        <script>
            $(document).ready(function () {
                $('#saleResult').dataTable();
            });
    </script>
	
    <!-- Custom Js -->
    <script src="../static/assets/js/custom-scripts.js"></script>

    <script>
        $('#sale-button').click(function(){
            console.log("########");
            startYear = $('#start-year option:selected');
            startMonth = $('#start-month option:selected');
            startDay = $('#start-day option:selected');
            endYear = $('#end-year option:selected');
            endMonth = $('#end-month option:selected');
            endDay = $('#end-day option:selected');
            console.log(startYear.val())
            searchTime={'startYear':startYear.val(), 'startMonth':startMonth.val(), 'startDay':startDay.val(), 'endYear':endYear.val(), 'endMonth':endMonth.val(),'endDay':endDay.val()};
            var data={'time':JSON.stringify(searchTime)};
            console.log(data);
            $.ajax({
                url:"/getSaleResult",
                type:'get',
                data:data,
                success:function(saleResult){
                    console.log(saleResult);
                    //predictResult = JSON.stringify(predictResult);
                    var tb = document.getElementById('saleResult');
                    var rowNum=tb.rows.length;
                    for (i=1;i<rowNum;i++)
                    {
                        tb.deleteRow(i);
                        rowNum=rowNum-1;
                        i=i-1;
                    }
                    //console.log(predictResult);
                    var txtCount = Object.keys(saleResult['food']).length;
                    console.log(saleResult['food'][1]);
                    for(i=1;i<=txtCount;i++){
                        var currentRows = document.getElementById("saleResult").rows.length;
                        //console.log(currentRows);
                        var insertTr = document.getElementById("saleResult").insertRow(currentRows);
                        var insertTd = insertTr.insertCell(0);
                        insertTd.style.textAlign="center";
                        insertTd.innerHTML = currentRows;
                        //console.log(predictResult[0][i]);

                        insertTd = insertTr.insertCell(1);
                        // insertTr.onmouseover="this.style.backgroundColor='#ffff66';";
                        // insertTr.onmouseout="this.style.backgroundColor='#ffffff';";
                        //insertTd.style.textAlign="center";
                        insertTd.innerHTML = saleResult['food'][i]['date'];

                        insertTd = insertTr.insertCell(2);
                        insertTd.innerHTML = saleResult['food'][i]['order'];
                        insertTd = insertTr.insertCell(3);
                        insertTd.innerHTML = saleResult['food'][i]['dishname'];
                        insertTd = insertTr.insertCell(4);
                        insertTd.innerHTML = saleResult['food'][i]['quantity'];
                    }
                    $(document).ready(function () {
                        $('#saleResult').dataTable();
                    });
                }
            })
        });
    </script>   
</body>

</html>